<div class="stage-view four" data-view="four">
  <h1>View Four</h1>
  <p>Clicking &#187; will show a JS only view (content generated by view controller)</p>
  <button class="btn" id="btn6">&#171;</button>
  <button class="btn" id="btn7">&#187;</button>
  <div class="hero"></div>
  <style>
    .hero {
      position: fixed;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      bottom: 10%;
      right: 10%;
      background: rgb(233, 161, 6);
      transition: transform 500ms ease;
    }

    .four.hero-transitioning {
      overflow: hidden;
    }
  </style>
  <script src="four.js"></script>
  <script>
    // var Stage = require("stage");
    (function() {
      var timerId;
      Stage.defineView({
        id: "four", 
        factory: function(stageContext, viewUi) {
          var hero;
          return {
            initialize: function() {
              hero = heroTransition(stageContext, viewUi); //from four.js
              hero.init();
              document.getElementById("btn6").addEventListener(ACTION, function() {
                stageContext.popView();
              }, false);
              document.getElementById("btn7").addEventListener(ACTION, function() {
                stageContext.pushView("five", {
                  transition: "slide"  
                });
              }, false);
              viewUi.addEventListener("transitionout", function() {
                hero.reset();
              });

            },
            activate: function(opts, done) {
              var counter = 3, counterElem = document.getElementById("actionbar");
              timerId = setInterval(function() {
                if(!counter) {
                  clearInterval(timerId);
                  done();
                }
                counterElem.innerHTML = (counter--);
              }, 200);
            },
            deactivate: function() {
              clearInterval(timerId);
            }
          };
        }
      });
    })();
  </script>
</div