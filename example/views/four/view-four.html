<div class="stage-view four" data-view="four">
  <h1>View Four</h1>
  <p>Clicking &#187; will show a JS only view (content generated by view controller)</p>
  <button class="btn" id="btn6">&#171;</button>
  <button class="btn" id="btn7">&#187;</button>
  <div class="fab"></div>
  <style>
    .fab {
      position: fixed;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      bottom: 10%;
      right: 10%;
      background: rgb(213, 178, 104);
      transition: transform 500ms ease;
    }
    .four.fab-transitioning {
      overflow: hidden;
    }
    .fab-fade .stage-view {
      opacity: 0;
      -moz-transition: opacity 350ms ease;
      -webkit-transition: opacity 350ms ease;
      -o-transition: opacity 350ms ease;
      -ms-transition: opacity 350ms ease;
      transition: opacity 350ms ease;
    }
    .fab-fade .stage-view.pop {
      opacity: 0;
    }
    .fab-fade .stage-view.in {
      opacity: 1;
    }
    .fab-fade .stage-view.stack {
      opacity: 0.99;
    }

  </style>
  <script src="views/four/four.js"></script>
  <script>
    // var Stage = require("stage");
    (function() {
      var timerId;
      Stage.defineView({
        id: "four", 
        factory: function(stageContext, viewUi) {
          var fab_transition;
          return {
            initialize: function() {
              fab_transition = fabTransition(stageContext, viewUi); //from four.js
              fab_transition.init();
              document.getElementById("btn6").addEventListener(ACTION, function() {
                stageContext.popView();
              }, false);
              document.getElementById("btn7").addEventListener(ACTION, function() {
                stageContext.pushView("five", {
                  transition: "slide"  
                });
              }, false);
              viewUi.addEventListener("transitionout", function() {
                fab_transition.reset();
              });

            },
            activate: function(opts, done) {
              var counter = 3, counterElem = document.getElementById("actionbar");
              timerId = setInterval(function() {
                if(!counter) {
                  clearInterval(timerId);
                  done();
                }
                counterElem.innerHTML = (counter--);
              }, 200);
            },
            deactivate: function() {
              clearInterval(timerId);
            }
          };
        }
      });
    })();
  </script>
</div